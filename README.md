# SMTP å‘ä¿¡é…ç½®æµ‹è¯•å·¥å…·

è¿™æ˜¯ä¸€ä¸ªç®€å•çš„å‘½ä»¤è¡ŒPythonè„šæœ¬ï¼Œç”¨äºŽæµ‹è¯•æ‚¨çš„SMTPï¼ˆç®€å•é‚®ä»¶ä¼ è¾“åè®®ï¼‰é…ç½®æ˜¯å¦æ­£ç¡®ã€‚å®ƒé€šè¿‡å¼•å¯¼æ‚¨è¾“å…¥å¿…è¦çš„å‚æ•°ï¼ˆæœåŠ¡å™¨ã€ç«¯å£ã€ç”¨æˆ·åã€å¯†ç ç­‰ï¼‰ï¼Œç„¶åŽå°è¯•å‘é€ä¸€å°æµ‹è¯•é‚®ä»¶ï¼Œæ¥éªŒè¯æ‚¨çš„è®¾ç½®ã€‚

This is a simple command-line Python script designed to test your SMTP (Simple Mail Transfer Protocol) configuration. It guides you through entering the necessary parameters (server, port, username, password, etc.) and then attempts to send a test email to verify your settings.

## âœ¨ ä¸»è¦åŠŸèƒ½ (Features)

- **äº¤äº’å¼è¾“å…¥**: é€šè¿‡å‘½ä»¤è¡Œæç¤ºï¼Œå¼•å¯¼ç”¨æˆ·è¾“å…¥æ‰€æœ‰å¿…éœ€çš„é…ç½®ä¿¡æ¯ã€‚
- **å®‰å…¨å¯†ç è¾“å…¥**: ä½¿ç”¨ `getpass` æ¨¡å—è¾“å…¥å¯†ç ï¼Œå¯†ç ä¸ä¼šåœ¨å±å¹•ä¸Šæ˜Žæ–‡æ˜¾ç¤ºã€‚
- **çµæ´»çš„æ”¶å‘ä»¶äºº**: æ”¯æŒè‡ªå®šä¹‰å‘ä»¶äººå’Œæ”¶ä»¶äººé‚®ç®±åœ°å€ã€‚
- **åè®®è‡ªé€‚åº”**: èƒ½å¤Ÿæ ¹æ®ç«¯å£å’Œç”¨æˆ·çš„é€‰æ‹©ï¼Œè‡ªåŠ¨å¤„ç† `SSL` (å¦‚ç«¯å£465) å’Œ `STARTTLS` (å¦‚ç«¯å£587) ä¸¤ç§å®‰å…¨è¿žæŽ¥æ–¹å¼ã€‚
- **æ¸…æ™°çš„åé¦ˆ**: æ— è®ºå‘é€æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œéƒ½ä¼šæä¾›æ˜Žç¡®çš„æç¤ºä¿¡æ¯ï¼Œå¸®åŠ©å®šä½é—®é¢˜ã€‚
- **é›¶ä¾èµ–**: ä»…ä½¿ç”¨Pythonæ ‡å‡†åº“ï¼Œæ— éœ€å®‰è£…ä»»ä½•ç¬¬ä¸‰æ–¹åŒ…ã€‚

## ðŸ“‹ çŽ¯å¢ƒè¦æ±‚ (Prerequisites)

- **Python 3.x**

## ðŸš€ å¦‚ä½•ä½¿ç”¨ (How to Use)

1.  **ä¸‹è½½è„šæœ¬**:
    å°†è„šæœ¬ä»£ç ä¿å­˜ä¸ºä¸€ä¸ªæ–‡ä»¶ï¼Œä¾‹å¦‚ `smtp_test.py`ã€‚

2.  **æ‰“å¼€ç»ˆç«¯**:
    æ‰“å¼€æ‚¨çš„å‘½ä»¤è¡Œå·¥å…·ï¼ˆä¾‹å¦‚ Windows çš„ `CMD` æˆ– `PowerShell`ï¼ŒmacOS/Linux çš„ `Terminal`ï¼‰ã€‚

3.  **è¿è¡Œè„šæœ¬**:
    åœ¨ç»ˆç«¯ä¸­ï¼Œå¯¼èˆªåˆ°è„šæœ¬æ‰€åœ¨çš„ç›®å½•ï¼Œå¹¶è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
    ```bash
    python smtp_test.py
    ```

4.  **è¾“å…¥é…ç½®ä¿¡æ¯**:
    æ ¹æ®å±å¹•ä¸Šçš„æç¤ºï¼Œä¾æ¬¡è¾“å…¥æ‚¨çš„SMTPé…ç½®ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹è¿‡ç¨‹ï¼š

    ```
    --- SMTP å‘ä¿¡é…ç½®æµ‹è¯•å·¥å…· ---
    æœ¬ç¨‹åºå°†ä»ŽæŒ‡å®šé‚®ç®±å‘é€ä¸€å°æµ‹è¯•é‚®ä»¶åˆ°å¦ä¸€ä¸ªé‚®ç®±ã€‚
    è¯·è¾“å…¥SMTPæœåŠ¡å™¨åœ°å€ (e.g., smtp.gmail.com): smtp.qq.com
    è¯·è¾“å…¥ç«¯å£å· (e.g., 465 for SSL, 587 for TLS): 465
    è¯·è¾“å…¥ä½ çš„é‚®ç®±åœ°å€ (Username/Sender): your-email@qq.com
    è¯·è¾“å…¥æ”¶ä»¶äººé‚®ç®±åœ°å€ (Recipient Email): recipient@example.com
    è¯·è¾“å…¥å‘ä»¶äººé‚®ç®±çš„å¯†ç æˆ–æŽˆæƒç  (Password/App Password): 
    è¿žæŽ¥æ˜¯å¦ä½¿ç”¨ SSL? (æ˜¯/å¦, y/n) [å¯¹äºŽ465ç«¯å£å¡«'æ˜¯', 587ç«¯å£å¡«'å¦']: y

    æ­£åœ¨å°è¯•è¿žæŽ¥åˆ°æœåŠ¡å™¨å¹¶å‘é€é‚®ä»¶...
    âœ… é‚®ä»¶å‘é€æˆåŠŸï¼è¯·æ£€æŸ¥ 'recipient@example.com' çš„æ”¶ä»¶ç®±ã€‚
    ```

## âš ï¸ é‡è¦æç¤º (Important Notes)

### 1. æŽˆæƒç  (App Password / Authorization Code)

å‡ºäºŽå®‰å…¨åŽŸå› ï¼Œå¤§å¤šæ•°ä¸»æµé‚®ç®±æœåŠ¡å•†ï¼ˆå¦‚Gmail, QQ, 163ç­‰ï¼‰ä¸å†å…è®¸ç›´æŽ¥ä½¿ç”¨æ‚¨çš„ç™»å½•å¯†ç é€šè¿‡ç¬¬ä¸‰æ–¹å®¢æˆ·ç«¯è®¿é—®SMTPæœåŠ¡ã€‚æ‚¨å¿…é¡»åœ¨é‚®ç®±çš„ç½‘é¡µè®¾ç½®ä¸­ï¼Œå¼€å¯ `IMAP/SMTP` æœåŠ¡ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªä¸“ç”¨çš„ **æŽˆæƒç ** (æˆ–ç§° **åº”ç”¨ä¸“ç”¨å¯†ç **)ã€‚

**åœ¨è„šæœ¬ä¸­è¾“å…¥å¯†ç æ—¶ï¼Œè¯·ä½¿ç”¨æ­¤æŽˆæƒç ï¼Œè€Œä¸æ˜¯æ‚¨çš„é‚®ç®±ç™»å½•å¯†ç ï¼**

### 2. SSL vs. STARTTLS

è¿™æ˜¯æœ€å¸¸è§çš„é…ç½®æ··æ·†ç‚¹ã€‚è¯·ç¡®ä¿æ‚¨çš„ç«¯å£å·å’ŒSSLé€‰é¡¹åŒ¹é…ï¼š

- **ä½¿ç”¨ SSL (ç«¯å£ 465)**:
  - è¿žæŽ¥ä»Žä¸€å¼€å§‹å°±æ˜¯åŠ å¯†çš„ã€‚
  - å½“è„šæœ¬æç¤º `è¿žæŽ¥æ˜¯å¦ä½¿ç”¨ SSL?` æ—¶ï¼Œæ‚¨åº”è¯¥è¾“å…¥ `æ˜¯` æˆ– `y`ã€‚

- **ä½¿ç”¨ STARTTLS (ç«¯å£ 587 æˆ– 25)**:
  - è¿žæŽ¥ä»¥æ˜Žæ–‡å¼€å§‹ï¼Œç„¶åŽé€šè¿‡ `STARTTLS` å‘½ä»¤å‡çº§ä¸ºåŠ å¯†è¿žæŽ¥ã€‚
  - å½“è„šæœ¬æç¤º `è¿žæŽ¥æ˜¯å¦ä½¿ç”¨ SSL?` æ—¶ï¼Œæ‚¨åº”è¯¥è¾“å…¥ `å¦` æˆ– `n`ã€‚
 ## ðŸ” é”™è¯¯æŽ’æŸ¥ (Troubleshooting)

- **`SMTPAuthenticationError`**:
  - **åŽŸå› **: è®¤è¯å¤±è´¥ã€‚
  - **è§£å†³æ–¹æ³•**: æ£€æŸ¥æ‚¨çš„ç”¨æˆ·åï¼ˆé‚®ç®±åœ°å€ï¼‰å’Œå¯†ç ï¼ˆ**æŽˆæƒç **ï¼‰æ˜¯å¦å®Œå…¨æ­£ç¡®ã€‚ç¡®è®¤æ‚¨ä½¿ç”¨çš„æ˜¯æŽˆæƒç è€Œä¸æ˜¯ç™»å½•å¯†ç ã€‚

- **`ConnectionRefusedError` æˆ– `SMTPServerDisconnected`**:
  - **åŽŸå› **: è¿žæŽ¥é—®é¢˜ã€‚
  - **è§£å†³æ–¹æ³•**:
    1.  æ£€æŸ¥æ‚¨çš„SMTPæœåŠ¡å™¨åœ°å€å’Œç«¯å£å·æ˜¯å¦æ­£ç¡®ã€‚
    2.  ç¡®è®¤æ‚¨çš„ `SSL/STARTTLS` è®¾ç½®ä¸Žç«¯å£å·åŒ¹é…ï¼ˆè§ä¸Šæ–‡ï¼‰ã€‚
    3.  æ£€æŸ¥æ‚¨çš„ç½‘ç»œè¿žæŽ¥æˆ–é˜²ç«å¢™è®¾ç½®æ˜¯å¦é˜»æ­¢äº†å¯¹å¤–ç«¯å£çš„è®¿é—®ã€‚

- **å…¶ä»– `Exception`**:
  - **åŽŸå› **: å¯èƒ½å­˜åœ¨å…¶ä»–ç½‘ç»œé—®é¢˜æˆ–æœåŠ¡å•†çš„ä¸´æ—¶é™åˆ¶ã€‚
  - **è§£å†³æ–¹æ³•**: ä»”ç»†é˜…è¯»é”™è¯¯ä¿¡æ¯ï¼Œæˆ–åœ¨ç½‘ä¸Šæœç´¢è¯¥é”™è¯¯ä»£ç ã€‚


> Forged in human-AI light.
